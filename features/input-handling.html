<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Input Handling - Unofficial Bevy Cheat Book</title>
        <!-- Custom HTML head -->
<script async defer src="https://buttons.github.io/buttons.js"></script>
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="icon" href="../favicon.svg">
        <link rel="shortcut icon" href="../favicon.png">
        <link rel="stylesheet" href="../css/variables.css">
        <link rel="stylesheet" href="../css/general.css">
        <link rel="stylesheet" href="../css/chrome.css">
        <link rel="stylesheet" href="../css/print.css" media="print">
        <!-- Fonts -->
        <link rel="stylesheet" href="../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../fonts/fonts.css">
        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../highlight.css">
        <link rel="stylesheet" href="../tomorrow-night.css">
        <link rel="stylesheet" href="../ayu-highlight.css">

        <!-- Custom theme stylesheets -->
    </head>
    <body>
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded affix "><a href="../introduction.html">Introduction</a></li><li class="chapter-item expanded "><a href="../cheatsheet.html"><strong aria-hidden="true">1.</strong> Quick Reference (Alphabetical Index / Glossary)</a></li><li class="chapter-item expanded "><a href="../setup/_index.html"><strong aria-hidden="true">2.</strong> Bevy Setup Tips</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../setup/bevy-git.html"><strong aria-hidden="true">2.1.</strong> Using bleeding-edge Bevy (main)</a></li><li class="chapter-item expanded "><a href="../setup/editor.html"><strong aria-hidden="true">2.2.</strong> Text Editor / IDE</a></li><li class="chapter-item expanded "><a href="../setup/bevy-config.html"><strong aria-hidden="true">2.3.</strong> Customizing Bevy (features, modularity)</a></li><li class="chapter-item expanded "><a href="../setup/bevy-tools.html"><strong aria-hidden="true">2.4.</strong> Dev Tools and Editors for Bevy</a></li><li class="chapter-item expanded "><a href="../setup/unofficial-plugins.html"><strong aria-hidden="true">2.5.</strong> 3rd-party Plugins</a></li></ol></li><li class="chapter-item expanded "><a href="../programming/_index.html"><strong aria-hidden="true">3.</strong> Bevy Programming</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../programming/_basics.html"><strong aria-hidden="true">3.1.</strong> Basics</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../programming/ecs-intro.html"><strong aria-hidden="true">3.1.1.</strong> Intro to ECS</a></li><li class="chapter-item expanded "><a href="../programming/ec.html"><strong aria-hidden="true">3.1.2.</strong> Entities and Components</a></li><li class="chapter-item expanded "><a href="../programming/res.html"><strong aria-hidden="true">3.1.3.</strong> Resources</a></li><li class="chapter-item expanded "><a href="../programming/systems.html"><strong aria-hidden="true">3.1.4.</strong> Systems</a></li><li class="chapter-item expanded "><a href="../programming/queries.html"><strong aria-hidden="true">3.1.5.</strong> Queries</a></li><li class="chapter-item expanded "><a href="../programming/commands.html"><strong aria-hidden="true">3.1.6.</strong> Commands</a></li><li class="chapter-item expanded "><a href="../programming/events.html"><strong aria-hidden="true">3.1.7.</strong> Events</a></li><li class="chapter-item expanded "><a href="../programming/app-builder.html"><strong aria-hidden="true">3.1.8.</strong> App Builder (fn main)</a></li></ol></li><li class="chapter-item expanded "><a href="../programming/_next-steps.html"><strong aria-hidden="true">3.2.</strong> Next Steps</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../programming/local.html"><strong aria-hidden="true">3.2.1.</strong> Local Resources</a></li><li class="chapter-item expanded "><a href="../programming/plugins.html"><strong aria-hidden="true">3.2.2.</strong> Plugins</a></li><li class="chapter-item expanded "><a href="../programming/system-order.html"><strong aria-hidden="true">3.2.3.</strong> System Order of Execution</a></li><li class="chapter-item expanded "><a href="../programming/system-sets.html"><strong aria-hidden="true">3.2.4.</strong> System Sets</a></li><li class="chapter-item expanded "><a href="../programming/parent-child.html"><strong aria-hidden="true">3.2.5.</strong> Hierarchical Entities</a></li><li class="chapter-item expanded "><a href="../programming/change-detection.html"><strong aria-hidden="true">3.2.6.</strong> Change Detection</a></li><li class="chapter-item expanded "><a href="../programming/system-chaining.html"><strong aria-hidden="true">3.2.7.</strong> System Chaining</a></li><li class="chapter-item expanded "><a href="../programming/query-sets.html"><strong aria-hidden="true">3.2.8.</strong> Query Sets</a></li><li class="chapter-item expanded "><a href="../programming/states.html"><strong aria-hidden="true">3.2.9.</strong> States</a></li><li class="chapter-item expanded "><a href="../programming/run-criteria.html"><strong aria-hidden="true">3.2.10.</strong> Run Criteria</a></li><li class="chapter-item expanded "><a href="../programming/labels.html"><strong aria-hidden="true">3.2.11.</strong> Labels</a></li></ol></li><li class="chapter-item expanded "><a href="../programming/_advanced.html"><strong aria-hidden="true">3.3.</strong> Advanced</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../programming/stages.html"><strong aria-hidden="true">3.3.1.</strong> Stages</a></li><li class="chapter-item expanded "><a href="../programming/removal-detection.html"><strong aria-hidden="true">3.3.2.</strong> Removal Detection</a></li><li class="chapter-item expanded "><a href="../programming/world-exclusive.html"><strong aria-hidden="true">3.3.3.</strong> [WIP] Direct World/ECS Access</a></li><li class="chapter-item expanded "><a href="../programming/non-send.html"><strong aria-hidden="true">3.3.4.</strong> [WIP] Non-Send Resources</a></li></ol></li></ol></li><li class="chapter-item expanded "><a href="../features/_index.html"><strong aria-hidden="true">4.</strong> Bevy Features</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../features/transforms.html"><strong aria-hidden="true">4.1.</strong> Transforms and Coordinates</a></li><li class="chapter-item expanded "><a href="../features/assets.html"><strong aria-hidden="true">4.2.</strong> Assets</a></li><li class="chapter-item expanded "><a href="../features/input-handling.html" class="active"><strong aria-hidden="true">4.3.</strong> Input Handling</a></li><li class="chapter-item expanded "><a href="../features/windowing.html"><strong aria-hidden="true">4.4.</strong> [WIP] Window Management</a></li><li class="chapter-item expanded "><a href="../features/camera.html"><strong aria-hidden="true">4.5.</strong> [WIP] Cameras</a></li><li class="chapter-item expanded "><a href="../features/scenes.html"><strong aria-hidden="true">4.6.</strong> [WIP] Scenes</a></li><li class="chapter-item expanded "><a href="../features/gltf.html"><strong aria-hidden="true">4.7.</strong> 3D Models (GLTF)</a></li><li class="chapter-item expanded "><a href="../features/sprites.html"><strong aria-hidden="true">4.8.</strong> [WIP] Sprites (2D)</a></li><li class="chapter-item expanded "><a href="../features/textures.html"><strong aria-hidden="true">4.9.</strong> [WIP] Textures</a></li><li class="chapter-item expanded "><a href="../features/materials.html"><strong aria-hidden="true">4.10.</strong> [WIP] Materials</a></li><li class="chapter-item expanded "><a href="../features/meshes.html"><strong aria-hidden="true">4.11.</strong> [WIP] Meshes</a></li><li class="chapter-item expanded "><a href="../features/pbr.html"><strong aria-hidden="true">4.12.</strong> [WIP] Physically-Based Rendering (PBR)</a></li><li class="chapter-item expanded "><a href="../features/fixed-timestep.html"><strong aria-hidden="true">4.13.</strong> Fixed Timestep</a></li><li class="chapter-item expanded "><a href="../features/audio.html"><strong aria-hidden="true">4.14.</strong> Audio</a></li></ol></li><li class="chapter-item expanded "><a href="../pitfalls/_index.html"><strong aria-hidden="true">5.</strong> Common Pitfalls</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../pitfalls/performance.html"><strong aria-hidden="true">5.1.</strong> Slow Performance</a></li><li class="chapter-item expanded "><a href="../pitfalls/into-system.html"><strong aria-hidden="true">5.2.</strong> Error adding function as system</a></li><li class="chapter-item expanded "><a href="../pitfalls/build-errors.html"><strong aria-hidden="true">5.3.</strong> Strange Compilation Errors</a></li><li class="chapter-item expanded "><a href="../pitfalls/query-filter.html"><strong aria-hidden="true">5.4.</strong> Combining Query Filters</a></li><li class="chapter-item expanded "><a href="../pitfalls/split-borrows.html"><strong aria-hidden="true">5.5.</strong> Borrow multiple fields from struct</a></li><li class="chapter-item expanded "><a href="../pitfalls/frame-delay.html"><strong aria-hidden="true">5.6.</strong> Frame Delays / 1-frame-lag</a></li><li class="chapter-item expanded "><a href="../pitfalls/ui-camera.html"><strong aria-hidden="true">5.7.</strong> UI is not displaying</a></li><li class="chapter-item expanded "><a href="../pitfalls/2d-camera-z.html"><strong aria-hidden="true">5.8.</strong> Cannot see sprites in 2D</a></li><li class="chapter-item expanded "><a href="../pitfalls/3d-not-rendering.html"><strong aria-hidden="true">5.9.</strong> Cannot see 3D model</a></li><li class="chapter-item expanded "><a href="../pitfalls/file-formats.html"><strong aria-hidden="true">5.10.</strong> File Format Support</a></li><li class="chapter-item expanded "><a href="../pitfalls/time.html"><strong aria-hidden="true">5.11.</strong> Bevy Time vs. Rust/OS time</a></li><li class="chapter-item expanded "><a href="../pitfalls/ui-y-up.html"><strong aria-hidden="true">5.12.</strong> UI layout is inverted</a></li><li class="chapter-item expanded "><a href="../pitfalls/uv-coordinates.html"><strong aria-hidden="true">5.13.</strong> Textures/Images are flipped</a></li></ol></li><li class="chapter-item expanded "><a href="../patterns/_index.html"><strong aria-hidden="true">6.</strong> Advanced Patterns</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../patterns/generic-systems.html"><strong aria-hidden="true">6.1.</strong> Generic Systems</a></li><li class="chapter-item expanded "><a href="../patterns/manual-event-clear.html"><strong aria-hidden="true">6.2.</strong> Manual Event Clearing</a></li></ol></li><li class="chapter-item expanded "><a href="../cookbook/_index.html"><strong aria-hidden="true">7.</strong> Bevy Cookbook</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../cookbook/quit.html"><strong aria-hidden="true">7.1.</strong> Quit the App</a></li><li class="chapter-item expanded "><a href="../cookbook/clear-color.html"><strong aria-hidden="true">7.2.</strong> Change the Background Color</a></li><li class="chapter-item expanded "><a href="../cookbook/print-framerate.html"><strong aria-hidden="true">7.3.</strong> Show Framerate in Console</a></li><li class="chapter-item expanded "><a href="../cookbook/mouse-grab.html"><strong aria-hidden="true">7.4.</strong> Grab the Mouse</a></li><li class="chapter-item expanded "><a href="../cookbook/window-icon.html"><strong aria-hidden="true">7.5.</strong> Setting the Window Icon</a></li><li class="chapter-item expanded "><a href="../cookbook/assets-ready.html"><strong aria-hidden="true">7.6.</strong> Track Assets Loading</a></li><li class="chapter-item expanded "><a href="../cookbook/cursor2world.html"><strong aria-hidden="true">7.7.</strong> Convert cursor to world coordinates</a></li><li class="chapter-item expanded "><a href="../cookbook/custom-projection.html"><strong aria-hidden="true">7.8.</strong> Custom Camera Projection</a></li><li class="chapter-item expanded "><a href="../cookbook/pan-orbit-camera.html"><strong aria-hidden="true">7.9.</strong> Pan+Orbit Camera</a></li><li class="chapter-item expanded "><a href="../cookbook/print-resources.html"><strong aria-hidden="true">7.10.</strong> List All Resource Types</a></li></ol></li><li class="chapter-item expanded "><a href="../platforms/_index.html"><strong aria-hidden="true">8.</strong> Bevy on Different Platforms</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../platforms/linux.html"><strong aria-hidden="true">8.1.</strong> Linux Desktop</a></li><li class="chapter-item expanded "><a href="../platforms/macos.html"><strong aria-hidden="true">8.2.</strong> macOS Desktop</a></li><li class="chapter-item expanded "><a href="../platforms/windows.html"><strong aria-hidden="true">8.3.</strong> Windows Desktop</a></li><li class="chapter-item expanded "><a href="../platforms/wasm.html"><strong aria-hidden="true">8.4.</strong> Browser (WebAssembly)</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../platforms/wasm/wasm-pack.html"><strong aria-hidden="true">8.4.1.</strong> Setup (wasm-pack)</a></li><li class="chapter-item expanded "><a href="../platforms/wasm/cargo-make.html"><strong aria-hidden="true">8.4.2.</strong> Setup (Cargo Make)</a></li><li class="chapter-item expanded "><a href="../platforms/wasm/panic-console.html"><strong aria-hidden="true">8.4.3.</strong> Panic Messages</a></li><li class="chapter-item expanded "><a href="../platforms/wasm/rng.html"><strong aria-hidden="true">8.4.4.</strong> Random Number Generation</a></li><li class="chapter-item expanded "><a href="../platforms/wasm/size-opt.html"><strong aria-hidden="true">8.4.5.</strong> Optimize for Size</a></li><li class="chapter-item expanded "><a href="../platforms/wasm/gh-pages.html"><strong aria-hidden="true">8.4.6.</strong> Hosting on GitHub Pages</a></li></ol></li></ol></li><li class="chapter-item expanded "><a href="../contributing.html">Contributing</a></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light (default)</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">Unofficial Bevy Cheat Book</h1>

                    <div class="right-buttons">
                        <a href="../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>
                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="input-handling"><a class="header" href="#input-handling">Input Handling</a></h1>
<p><a href="../code/examples/input.rs">Click here to download the example code.</a></p>
<p>This is a complete example that you can run. It will print all input activity
to the console.</p>
<hr />
<p>Bevy supports the following inputs:</p>
<ul>
<li>Keyboard</li>
<li>Mouse (relative motion, buttons, scrolling)</li>
<li>Cursor (absolute pointer position)</li>
<li>Touchscreen (with multi-touch)</li>
<li>Most controllers/gamepads/joysticks (via the <a href="https://gitlab.com/gilrs-project/gilrs">gilrs</a> library)</li>
</ul>
<p>Sensors like accelerometers, gyroscopes, VR head tracking, are not supported yet.</p>
<p>For most input types (where it makes sense), Bevy provides two ways of
dealing with them:</p>
<ul>
<li>by checking the current state via <a href="../programming/res.html">resources</a>,</li>
<li>or via <a href="../programming/events.html">events</a>.</li>
</ul>
<p>Some inputs are only provided as events.</p>
<p>Checking state is done using <a href="../programming/res.html">resources</a> such as
<code>Input</code> (for binary inputs like keys or buttons), <code>Axis</code> (for analog inputs),
<code>Touches</code> (for fingers on a touchscreen), etc. This way of handling input is
very convenient for implementing game logic. In these scenarios, you typically
only care about the specific inputs mapped to actions in your game. You can
check specific buttons/keys to see when they get pressed/released, or what
their current state is.</p>
<p>Events are a lower-level, more all-encompassing approach. Use them if you
want to get all activity from that class of input device, rather than only
checking for specific inputs. For example, if you are implementing text
input / typing, you probably want to receive all keyboard activity.</p>
<p>Since bevy resources and events are global and accessible from any system,
you don't need to centralize your input handling code in one place. You can
check any inputs you care about, from any system.</p>
<h2 id="input-mapping"><a class="header" href="#input-mapping">Input Mapping</a></h2>
<p>Bevy does not yet offer a built-in way to do input mapping (configure key
bindings, etc). You need to come up with your own way of translating the
inputs into logical actions in your game/app.</p>
<p>There are some community-made plugins that may help with that: <a href="https://bevyengine.org/assets/#input">see the
input-section on bevy-assets</a>.</p>
<p>It may be a good idea to build your own abstractions specific to your
game. For example, if you need to handle player movement, you might want to
have a system for reading inputs and converting them to your own internal
&quot;movement intent/action events&quot;, and then another system acting on those
internal events, to actually move the player. Make sure to use <a href="../programming/system-order.html">explicit
system ordering</a> to avoid <a href="../pitfalls/frame-delay.html">lag / frame
delays</a>.</p>
<h2 id="how-to-work-with-different-input-devices"><a class="header" href="#how-to-work-with-different-input-devices">How to work with different input devices</a></h2>
<h3 id="keyboard"><a class="header" href="#keyboard">Keyboard</a></h3>
<p>Keyboard keys can be identified by Scan Code or Key Code.</p>
<p>Scan Codes represent the physical key on the keyboard, regardless of the
system layout. Key Codes represent the symbol/letter on each key and are
dependent on the keyboard layout.</p>
<p>Unfortunately, support for using Scan Codes in Bevy is limited. This can be
annoying for people with non-QWERTY keyboard layouts.</p>
<p>Checking the state of specific keys can currently only be done by Key Code,
using the <code>Input&lt;KeyCode&gt;</code> resource:</p>
<pre><code class="language-rust no_run noplayground">fn keyboard_input(
    keys: Res&lt;Input&lt;KeyCode&gt;&gt;,
) {
    if keys.just_pressed(KeyCode::Space) {
        // Space was pressed
    }
    if keys.just_released(KeyCode::LControl) {
        // Left Ctrl was released
    }
    if keys.pressed(KeyCode::W) {
        // W is being held down
    }
}
</code></pre>
<p>To get all keyboard activity, you can use <code>KeyboardInput</code> events:</p>
<pre><code class="language-rust no_run noplayground">fn keyboard_events(
    mut key_evr: EventReader&lt;KeyboardInput&gt;,
) {
    use bevy::input::ElementState;

    for ev in key_evr.iter() {
        match ev.state {
            ElementState::Pressed =&gt; {
                println!(&quot;Key press: {:?} ({})&quot;, ev.key_code, ev.scan_code);
            }
            ElementState::Released =&gt; {
                println!(&quot;Key release: {:?} ({})&quot;, ev.key_code, ev.scan_code);
            }
        }
    }
}
</code></pre>
<p>These events give you both the Key Code and Scan Code, but unfortunately,
the Scan Code is just represented as an arbitrary <code>u32</code> integer ID (which
means it is difficult to figure out what actual physical key it represents).</p>
<h3 id="mouse-buttons"><a class="header" href="#mouse-buttons">Mouse Buttons</a></h3>
<p>Similar to keyboard input, mouse buttons are available as an <code>Input</code> state
resource, as well as events.</p>
<p>You can check the state of specific mouse buttons using <code>Input&lt;MouseButton&gt;</code>:</p>
<pre><code class="language-rust no_run noplayground">fn mouse_button_input(
    buttons: Res&lt;Input&lt;MouseButton&gt;&gt;,
) {
    if buttons.just_pressed(MouseButton::Left) {
        // Left button was pressed
    }
    if buttons.just_released(MouseButton::Left) {
        // Left Button was released
    }
    if buttons.pressed(MouseButton::Right) {
        // Right Button is being held down
    }
}
</code></pre>
<p>To get all press/release activity, use <code>MouseButtonInput</code> events:</p>
<pre><code class="language-rust no_run noplayground">fn mouse_button_events(
    mut mousebtn_evr: EventReader&lt;MouseButtonInput&gt;,
) {
    use bevy::input::ElementState;

    for ev in mousebtn_evr.iter() {
        match ev.state {
            ElementState::Pressed =&gt; {
                println!(&quot;Mouse button press: {:?}&quot;, ev.button);
            }
            ElementState::Released =&gt; {
                println!(&quot;Mouse button release: {:?}&quot;, ev.button);
            }
        }
    }
}
</code></pre>
<h3 id="mouse-motion"><a class="header" href="#mouse-motion">Mouse Motion</a></h3>
<p>If you need to detect relative mouse motion, you can use <code>MouseMotion</code> events.
Whenever the mouse is moved, you will get an event with the delta.</p>
<pre><code class="language-rust no_run noplayground">fn mouse_motion(
    mut motion_evr: EventReader&lt;MouseMotion&gt;,
) {
    for ev in motion_evr.iter() {
        println!(&quot;Mouse moved: X: {} px, Y: {} px&quot;, ev.delta.x, ev.delta.y);
    }
}
</code></pre>
<p>You might want to <a href="../cookbook/mouse-grab.html">grab/lock the mouse inside the game
window</a>.</p>
<h3 id="mouse-cursor"><a class="header" href="#mouse-cursor">Mouse Cursor</a></h3>
<p>You can get the current coordinates of the mouse pointer, from the respective
<code>Window</code>:</p>
<pre><code class="language-rust no_run noplayground">fn cursor_position(
    windows: Res&lt;Windows&gt;,
) {
    // Games typically only have one window (the primary window).
    // For multi-window applications, you need to use a specific window ID here.
    let window = windows.get_primary().unwrap();

    if let Some(_position) = window.cursor_position() {
        // cursor is inside the window, position given
    } else {
        // cursor is not inside the window
    }
}
</code></pre>
<p>To detect when the pointer is moved, use <code>CursorMoved</code> events to get the
updated coordinates:</p>
<pre><code class="language-rust no_run noplayground">fn cursor_events(
    mut cursor_evr: EventReader&lt;CursorMoved&gt;,
) {
    for ev in cursor_evr.iter() {
        println!(
            &quot;New cursor position: X: {}, Y: {}, in Window ID: {:?}&quot;,
            ev.position.x, ev.position.y, ev.id
        );
    }
}
</code></pre>
<p>Note that you can only get the position of the mouse inside a window;
you cannot get the global position of the mouse in the whole OS Desktop /
on the screen as a whole.</p>
<h3 id="scrolling--mouse-wheel"><a class="header" href="#scrolling--mouse-wheel">Scrolling / Mouse Wheel</a></h3>
<p>To detect scrolling input, use <code>MouseWheel</code> events:</p>
<pre><code class="language-rust no_run noplayground">fn scroll_events(
    mut scroll_evr: EventReader&lt;MouseWheel&gt;,
) {
    use bevy::input::mouse::MouseScrollUnit;
    for ev in scroll_evr.iter() {
        match ev.unit {
            MouseScrollUnit::Line =&gt; {
                println!(&quot;Scroll (line units): vertical: {}, horizontal: {}&quot;, ev.y, ev.x);
            }
            MouseScrollUnit::Pixel =&gt; {
                println!(&quot;Scroll (pixel units): vertical: {}, horizontal: {}&quot;, ev.y, ev.x);
            }
        }
    }
}
</code></pre>
<p>The <code>MouseScrollUnit</code> enum is important: it tells you the type of scroll
input.  <code>Line</code> is for hardware with fixed steps, like the wheel on desktop
mice. <code>Pixel</code> is for hardware with smooth (fine-grained) scrolling, like
laptop touchpads.</p>
<p>You should probably handle each of these differently (with different
sensitivity settings), to provide a good experience on both types of hardware.</p>
<h3 id="controller--gamepad--joystick"><a class="header" href="#controller--gamepad--joystick">Controller / Gamepad / Joystick</a></h3>
<p>You can detect when controllers/gamepads are connected or disconnected using
<code>GamepadEvent</code>. Do this to get the ID of the device and assign it to a
&quot;player&quot; in your game. You can easily support local multiplayer.</p>
<pre><code class="language-rust no_run noplayground">/// Simple resource to store the ID of the connected gamepad.
/// We need to know which gamepad to use for player input.
struct MyGamepad(Gamepad);

fn gamepad_connections(
    mut commands: Commands,
    my_gamepad: Option&lt;Res&lt;MyGamepad&gt;&gt;,
    mut gamepad_evr: EventReader&lt;GamepadEvent&gt;,
) {
    for GamepadEvent(id, kind) in gamepad_evr.iter() {
        match kind {
            GamepadEventType::Connected =&gt; {
                println!(&quot;New gamepad connected with ID: {:?}&quot;, id);

                // if we don't have any gamepad yet, use this one
                if my_gamepad.is_none() {
                    commands.insert_resource(MyGamepad(*id));
                }
            }
            GamepadEventType::Disconnected =&gt; {
                println!(&quot;Lost gamepad connection with ID: {:?}&quot;, id);

                // if it's the one we previously associated with the player,
                // disassociate it:
                if let Some(MyGamepad(old_id)) = my_gamepad.as_deref() {
                    if old_id == id {
                        commands.remove_resource::&lt;MyGamepad&gt;();
                    }
                }
            }
            // other events are irrelevant
            _ =&gt; {}
        }
    }
}
</code></pre>
<p>The other event types are for changes to axes and buttons. They are not
shown above, because handling gamepad input via events is inconvenient.</p>
<p>You can handle the analog sticks with <code>Axis&lt;GamepadAxis&gt;</code>. Buttons can be
handled with <code>Input&lt;GamepadButton&gt;</code> (similar to mouse buttons or keyboard
keys).</p>
<pre><code class="language-rust no_run noplayground">fn gamepad_input(
    axes: Res&lt;Axis&lt;GamepadAxis&gt;&gt;,
    buttons: Res&lt;Input&lt;GamepadButton&gt;&gt;,
    my_gamepad: Option&lt;Res&lt;MyGamepad&gt;&gt;,
) {
    let gamepad = if let Some(gp) = my_gamepad {
        // a gamepad is connected, we have the id
        gp.0
    } else {
        // no gamepad is connected
        return;
    };

    // The joysticks are represented using a separate axis for X and Y

    let axis_lx = GamepadAxis(gamepad, GamepadAxisType::LeftStickX);
    let axis_ly = GamepadAxis(gamepad, GamepadAxisType::LeftStickY);

    if let (Some(x), Some(y)) = (axes.get(axis_lx), axes.get(axis_ly)) {
        // combine X and Y into one vector
        let left_stick_pos = Vec2::new(x, y);

        // implement a dead-zone to ignore small inputs
        if left_stick_pos.length() &gt; 0.1 {
            // do something with the position of the left stick
        }
    }

    let jump_button = GamepadButton(gamepad, GamepadButtonType::South);
    let heal_button = GamepadButton(gamepad, GamepadButtonType::East);

    if buttons.just_pressed(jump_button) {
        // button pressed: make the player jump
    }

    if buttons.pressed(heal_button) {
        // button being held down: heal the player
    }
}
</code></pre>
<p>Notice that the names of buttons in the <code>enum</code> are vendor-neutral (like
<code>South</code> and <code>East</code> instead of X/O or A/B). Many different kinds of hardware
should work, but if your device is not supported, you should file an issue
with the <a href="https://gitlab.com/gilrs-project/gilrs">gilrs</a> project.</p>
<h3 id="touchscreen"><a class="header" href="#touchscreen">Touchscreen</a></h3>
<p>Multi-touch touchscreens are supported. You can track multiple fingers on
the screen, with position and pressure/force information. Bevy does not
offer gesture recognition.</p>
<p>The <code>Touches</code> resource allows you to track any fingers currently on the screen:</p>
<pre><code class="language-rust no_run noplayground">fn touches(
    touches: Res&lt;Touches&gt;,
) {
    // There is a lot more information available, see the API docs.
    // This example only shows some very basic things.

    for finger in touches.iter() {
        if touches.just_pressed(finger.id()) {
            println!(&quot;A new touch with ID {} just began.&quot;, finger.id());
        }
        println!(
            &quot;Finger {} is at position ({},{}), started from ({},{}).&quot;,
            finger.id(),
            finger.position().x,
            finger.position().y,
            finger.start_position().x,
            finger.start_position().y,
        );
    }
}
</code></pre>
<p>Alternatively, you can use <code>TouchInput</code> events, but this is often harder
to use:</p>
<pre><code class="language-rust no_run noplayground">fn touch_events(
    mut touch_evr: EventReader&lt;TouchInput&gt;,
) {
    use bevy::input::touch::TouchPhase;
    for ev in touch_evr.iter() {
        match ev.phase {
            TouchPhase::Started =&gt; {
                println!(&quot;Touch {} started at: {:?}&quot;, ev.id, ev.position);
            }
            TouchPhase::Moved =&gt; {
                println!(&quot;Touch {} moved to: {:?}&quot;, ev.id, ev.position);
            }
            TouchPhase::Ended =&gt; {
                println!(&quot;Touch {} ended at: {:?}&quot;, ev.id, ev.position);
            }
            TouchPhase::Cancelled =&gt; {
                println!(&quot;Touch {} cancelled at: {:?}&quot;, ev.id, ev.position);
            }
        }
    }
}
</code></pre>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../features/assets.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>
                            <a rel="next" href="../features/windowing.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>
                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../features/assets.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>
                    <a rel="next" href="../features/windowing.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>

        <script type="text/javascript">
            window.playground_copyable = true;
        </script>
        <script src="../elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../searcher.js" type="text/javascript" charset="utf-8"></script>
        <script src="../clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="../book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->
    </body>
</html>
