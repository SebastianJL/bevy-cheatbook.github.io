<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>3D Models (GLTF) - Unofficial Bevy Cheat Book</title>
        <!-- Custom HTML head -->
<script async defer src="https://buttons.github.io/buttons.js"></script>
<meta name="robots" content="noindex">
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="icon" href="../favicon.svg">
        <link rel="shortcut icon" href="../favicon.png">
        <link rel="stylesheet" href="../css/variables.css">
        <link rel="stylesheet" href="../css/general.css">
        <link rel="stylesheet" href="../css/chrome.css">
        <link rel="stylesheet" href="../css/print.css" media="print">
        <!-- Fonts -->
        <link rel="stylesheet" href="../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../fonts/fonts.css">
        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../highlight.css">
        <link rel="stylesheet" href="../tomorrow-night.css">
        <link rel="stylesheet" href="../ayu-highlight.css">

        <!-- Custom theme stylesheets -->
    </head>
    <body>
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded affix "><a href="../introduction.html">Introduction</a></li><li class="chapter-item expanded "><a href="../cheatsheet.html"><strong aria-hidden="true">1.</strong> Quick Reference (Alphabetical Index / Glossary)</a></li><li class="chapter-item expanded "><a href="../setup/_index.html"><strong aria-hidden="true">2.</strong> Bevy Setup Tips</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../setup/bevy-git.html"><strong aria-hidden="true">2.1.</strong> Using bleeding-edge Bevy (main)</a></li><li class="chapter-item expanded "><a href="../setup/editor.html"><strong aria-hidden="true">2.2.</strong> Text Editor / IDE</a></li><li class="chapter-item expanded "><a href="../setup/bevy-config.html"><strong aria-hidden="true">2.3.</strong> Customizing Bevy (features, modularity)</a></li><li class="chapter-item expanded "><a href="../setup/bevy-tools.html"><strong aria-hidden="true">2.4.</strong> Dev Tools and Editors for Bevy</a></li><li class="chapter-item expanded "><a href="../setup/unofficial-plugins.html"><strong aria-hidden="true">2.5.</strong> 3rd-party Plugins</a></li></ol></li><li class="chapter-item expanded "><a href="../programming/_index.html"><strong aria-hidden="true">3.</strong> Bevy Programming</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../programming/_basics.html"><strong aria-hidden="true">3.1.</strong> Basics</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../programming/ecs-intro.html"><strong aria-hidden="true">3.1.1.</strong> Intro to ECS</a></li><li class="chapter-item expanded "><a href="../programming/ec.html"><strong aria-hidden="true">3.1.2.</strong> Entities and Components</a></li><li class="chapter-item expanded "><a href="../programming/res.html"><strong aria-hidden="true">3.1.3.</strong> Resources</a></li><li class="chapter-item expanded "><a href="../programming/systems.html"><strong aria-hidden="true">3.1.4.</strong> Systems</a></li><li class="chapter-item expanded "><a href="../programming/queries.html"><strong aria-hidden="true">3.1.5.</strong> Queries</a></li><li class="chapter-item expanded "><a href="../programming/commands.html"><strong aria-hidden="true">3.1.6.</strong> Commands</a></li><li class="chapter-item expanded "><a href="../programming/events.html"><strong aria-hidden="true">3.1.7.</strong> Events</a></li><li class="chapter-item expanded "><a href="../programming/app-builder.html"><strong aria-hidden="true">3.1.8.</strong> App Builder (fn main)</a></li></ol></li><li class="chapter-item expanded "><a href="../programming/_next-steps.html"><strong aria-hidden="true">3.2.</strong> Next Steps</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../programming/local.html"><strong aria-hidden="true">3.2.1.</strong> Local Resources</a></li><li class="chapter-item expanded "><a href="../programming/plugins.html"><strong aria-hidden="true">3.2.2.</strong> Plugins</a></li><li class="chapter-item expanded "><a href="../programming/system-order.html"><strong aria-hidden="true">3.2.3.</strong> System Order of Execution</a></li><li class="chapter-item expanded "><a href="../programming/system-sets.html"><strong aria-hidden="true">3.2.4.</strong> System Sets</a></li><li class="chapter-item expanded "><a href="../programming/parent-child.html"><strong aria-hidden="true">3.2.5.</strong> Hierarchical Entities</a></li><li class="chapter-item expanded "><a href="../programming/change-detection.html"><strong aria-hidden="true">3.2.6.</strong> Change Detection</a></li><li class="chapter-item expanded "><a href="../programming/system-chaining.html"><strong aria-hidden="true">3.2.7.</strong> System Chaining</a></li><li class="chapter-item expanded "><a href="../programming/query-sets.html"><strong aria-hidden="true">3.2.8.</strong> Query Sets</a></li><li class="chapter-item expanded "><a href="../programming/states.html"><strong aria-hidden="true">3.2.9.</strong> States</a></li><li class="chapter-item expanded "><a href="../programming/run-criteria.html"><strong aria-hidden="true">3.2.10.</strong> Run Criteria</a></li><li class="chapter-item expanded "><a href="../programming/labels.html"><strong aria-hidden="true">3.2.11.</strong> Labels</a></li></ol></li><li class="chapter-item expanded "><a href="../programming/_advanced.html"><strong aria-hidden="true">3.3.</strong> Advanced</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../programming/stages.html"><strong aria-hidden="true">3.3.1.</strong> Stages</a></li><li class="chapter-item expanded "><a href="../programming/removal-detection.html"><strong aria-hidden="true">3.3.2.</strong> Removal Detection</a></li><li class="chapter-item expanded "><a href="../programming/world-exclusive.html"><strong aria-hidden="true">3.3.3.</strong> [WIP] Direct World/ECS Access</a></li><li class="chapter-item expanded "><a href="../programming/system-tests.html"><strong aria-hidden="true">3.3.4.</strong> Writing Tests for Systems</a></li></ol></li></ol></li><li class="chapter-item expanded "><a href="../features/_index.html"><strong aria-hidden="true">4.</strong> Bevy Features</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../features/transforms.html"><strong aria-hidden="true">4.1.</strong> Transforms and Coordinates</a></li><li class="chapter-item expanded "><a href="../features/assets.html"><strong aria-hidden="true">4.2.</strong> Assets</a></li><li class="chapter-item expanded "><a href="../features/hot-reload.html"><strong aria-hidden="true">4.3.</strong> Hot-Reloading Assets</a></li><li class="chapter-item expanded "><a href="../features/input-handling.html"><strong aria-hidden="true">4.4.</strong> Input Handling</a></li><li class="chapter-item expanded "><a href="../features/gltf.html" class="active"><strong aria-hidden="true">4.5.</strong> 3D Models (GLTF)</a></li><li class="chapter-item expanded "><a href="../features/fixed-timestep.html"><strong aria-hidden="true">4.6.</strong> Fixed Timestep</a></li><li class="chapter-item expanded "><a href="../features/audio.html"><strong aria-hidden="true">4.7.</strong> Audio</a></li></ol></li><li class="chapter-item expanded "><a href="../pitfalls/_index.html"><strong aria-hidden="true">5.</strong> Common Pitfalls</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../pitfalls/build-errors.html"><strong aria-hidden="true">5.1.</strong> Strange build errors (like &quot;failed to select a version&quot;)</a></li><li class="chapter-item expanded "><a href="../pitfalls/into-system.html"><strong aria-hidden="true">5.2.</strong> Error adding function as system</a></li><li class="chapter-item expanded "><a href="../pitfalls/split-borrows.html"><strong aria-hidden="true">5.3.</strong> Borrow multiple fields from struct</a></li><li class="chapter-item expanded "><a href="../pitfalls/performance.html"><strong aria-hidden="true">5.4.</strong> Slow Performance</a></li><li class="chapter-item expanded "><a href="../pitfalls/ui-camera.html"><strong aria-hidden="true">5.5.</strong> UI is not displaying</a></li><li class="chapter-item expanded "><a href="../pitfalls/2d-camera-z.html"><strong aria-hidden="true">5.6.</strong> Cannot see sprites in 2D</a></li><li class="chapter-item expanded "><a href="../pitfalls/3d-not-rendering.html"><strong aria-hidden="true">5.7.</strong> Cannot see 3D model</a></li><li class="chapter-item expanded "><a href="../pitfalls/file-formats.html"><strong aria-hidden="true">5.8.</strong> File Format Support</a></li><li class="chapter-item expanded "><a href="../pitfalls/time.html"><strong aria-hidden="true">5.9.</strong> Bevy Time vs. Rust/OS time</a></li><li class="chapter-item expanded "><a href="../pitfalls/ui-y-up.html"><strong aria-hidden="true">5.10.</strong> UI layout is inverted</a></li><li class="chapter-item expanded "><a href="../pitfalls/uv-coordinates.html"><strong aria-hidden="true">5.11.</strong> Textures/Images are flipped</a></li></ol></li><li class="chapter-item expanded "><a href="../patterns/_index.html"><strong aria-hidden="true">6.</strong> Advanced Patterns</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../patterns/generic-systems.html"><strong aria-hidden="true">6.1.</strong> Generic Systems</a></li><li class="chapter-item expanded "><a href="../patterns/manual-event-clear.html"><strong aria-hidden="true">6.2.</strong> Manual Event Clearing</a></li></ol></li><li class="chapter-item expanded "><a href="../cookbook/_index.html"><strong aria-hidden="true">7.</strong> Bevy Cookbook</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../cookbook/quit.html"><strong aria-hidden="true">7.1.</strong> Quit the App</a></li><li class="chapter-item expanded "><a href="../cookbook/clear-color.html"><strong aria-hidden="true">7.2.</strong> Change the Background Color</a></li><li class="chapter-item expanded "><a href="../cookbook/print-framerate.html"><strong aria-hidden="true">7.3.</strong> Show Framerate in Console</a></li><li class="chapter-item expanded "><a href="../cookbook/mouse-grab.html"><strong aria-hidden="true">7.4.</strong> Grab the Mouse</a></li><li class="chapter-item expanded "><a href="../cookbook/window-icon.html"><strong aria-hidden="true">7.5.</strong> Setting the Window Icon</a></li><li class="chapter-item expanded "><a href="../cookbook/assets-ready.html"><strong aria-hidden="true">7.6.</strong> Track Assets Loading</a></li><li class="chapter-item expanded "><a href="../cookbook/cursor2world.html"><strong aria-hidden="true">7.7.</strong> Convert cursor to world coordinates</a></li><li class="chapter-item expanded "><a href="../cookbook/custom-projection.html"><strong aria-hidden="true">7.8.</strong> Custom Camera Projection</a></li><li class="chapter-item expanded "><a href="../cookbook/pan-orbit-camera.html"><strong aria-hidden="true">7.9.</strong> Pan+Orbit Camera</a></li><li class="chapter-item expanded "><a href="../cookbook/print-resources.html"><strong aria-hidden="true">7.10.</strong> List All Resource Types</a></li></ol></li><li class="chapter-item expanded "><a href="../platforms/_index.html"><strong aria-hidden="true">8.</strong> Bevy on Different Platforms</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../platforms/linux.html"><strong aria-hidden="true">8.1.</strong> Linux Desktop</a></li><li class="chapter-item expanded "><a href="../platforms/macos.html"><strong aria-hidden="true">8.2.</strong> macOS Desktop</a></li><li class="chapter-item expanded "><a href="../platforms/windows.html"><strong aria-hidden="true">8.3.</strong> Windows Desktop</a></li><li class="chapter-item expanded "><a href="../platforms/wasm.html"><strong aria-hidden="true">8.4.</strong> Browser (WebAssembly)</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../platforms/wasm/panic-console.html"><strong aria-hidden="true">8.4.1.</strong> Panic Messages</a></li><li class="chapter-item expanded "><a href="../platforms/wasm/size-opt.html"><strong aria-hidden="true">8.4.2.</strong> Optimize for Size</a></li><li class="chapter-item expanded "><a href="../platforms/wasm/gh-pages.html"><strong aria-hidden="true">8.4.3.</strong> Hosting on GitHub Pages</a></li></ol></li></ol></li><li class="chapter-item expanded "><a href="../contributing.html">Contributing</a></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light (default)</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">Unofficial Bevy Cheat Book</h1>

                    <div class="right-buttons">
                        <a href="../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>
                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="3d-models-gltf"><a class="header" href="#3d-models-gltf">3D Models (GLTF)</a></h1>
<p>Relevant official examples:
<a href="https://github.com/bevyengine/bevy/blob/latest/examples/3d/load_gltf.rs"><code>load_gltf</code></a>,
<a href="https://github.com/bevyengine/bevy/blob/latest/examples/3d/update_gltf_scene.rs"><code>update_gltf_scene</code></a>.</p>
<hr />
<p>Bevy uses the GLTF 2.0 file format for 3D assets.</p>
<p>(other formats such as Wavefront OBJ may be unofficially available via 3rd-party plugins)</p>
<h2 id="quick-start-spawning-3d-models-into-your-world"><a class="header" href="#quick-start-spawning-3d-models-into-your-world">Quick-Start: Spawning 3D Models into your World</a></h2>
<p>The simplest use case is to just load a &quot;3D model&quot; and spawn it into the game world.</p>
<p>&quot;3D models&quot; can often be complex, consisting of multiple parts. Think of a
house: the windows, roof, doors, etc., are separate pieces, that are likely
made of multiple <a href="./meshes.html">meshes</a>, <a href="./materials.html">materials</a>, and
<a href="./textures.html">textures</a>. Bevy would technically need multiple ECS Entities
to represent and render the whole thing.</p>
<p>This is why your GLTF &quot;model&quot; is represented by Bevy as a <a href="./scenes.html">Scene</a>.
This way, you can easily spawn it, and Bevy will create all the relevant <a href="../programming/parent-child.html">child
entities</a> and configure them correctly.</p>
<p>So that you can treat the whole thing as &quot;a single object&quot; and position
it in the world, you can just <a href="./transforms.html#bevys-transforms">spawn it under a parent entity, and use its
<code>Transform</code></a>.</p>
<pre><code class="language-rust no_run noplayground">fn spawn_gltf(
    mut commands: Commands,
    ass: Res&lt;AssetServer&gt;,
) {
    // note that we have to include the `Scene0` label
    let my_gltf = ass.load(&quot;my.glb#Scene0&quot;);

    // to be able to position our 3d model:
    // spawn a parent entity with a Transform and GlobalTransform
    // and spawn our gltf as a scene under it
    commands.spawn_bundle((
        Transform::from_xyz(2.0, 0.0, -5.0),
        GlobalTransform::identity(),
    )).with_children(|parent| {
        parent.spawn_scene(my_gltf);
    });
}
</code></pre>
<p>If your GLTF Scene represents &quot;a whole level/map&quot;, rather than &quot;an individual
3d model&quot;, and you don't need to move it around, you can just spawn the
scene directly, without creating a parent entity.</p>
<p>Also, this example assumes that you have a simple GLTF file containing only
one &quot;default scene&quot;. GLTF is a very flexible file format. A single file can
contain many &quot;models&quot; or more complex &quot;scenes&quot;. To get a better understanding
of GLTF and possible workflows, read the rest of this page. :)</p>
<h2 id="introduction-to-gltf"><a class="header" href="#introduction-to-gltf">Introduction to GLTF</a></h2>
<p>GLTF is a modern open standard for exchanging 3D assets between different
3D software applications, like game engines and 3D modeling software.</p>
<p>The GLTF file format has two variants: human-readable ascii/text (<code>*.gltf</code>)
and binary (<code>*.glb</code>). The binary format is more compact and preferable
for packaging the assets with your game. The text format may be useful for
development, as it can be easier to manually inspect using a text editor.</p>
<p>A GLTF file can contain many objects (sub-assets): meshes, materials, textures,
scenes. When loading a GLTF file, Bevy will load all of the assets contained
inside. They will be mapped to the appropriate Bevy-internal asset types.</p>
<h2 id="the-gltf-sub-assets"><a class="header" href="#the-gltf-sub-assets">The GLTF sub-assets</a></h2>
<p>GLTF terminology can be confusing, as it sometimes uses the same words to
refer to different things, compared to Bevy. This section will try explain
the various GLTF terms.</p>
<p>To understand everything, it helps to mentally consider how these concepts are
represented in different places: in your 3D modeling software (like Blender),
in the GLTF file itself, and in Bevy.</p>
<p>GLTF <strong>Scenes</strong> are what you spawn into your game world. This is typically
what you see on the screen in your 3D modeling software. Scenes combine
all of the data needed for the game engine to create all the needed
entities to represent what you want. Conceptually, think of a scene as one
&quot;unit&quot;. Depending on your use case, this could be one &quot;3d model&quot;,
or even a whole map or game level. In Bevy, these are represented as Bevy
<a href="./scenes.html">Scenes</a> with all the child ECS entities.</p>
<p>GLTF Scenes are composed of GLTF <strong>Nodes</strong>. These describe the &quot;objects&quot; in
the scene, typically GLTF Meshes, but can also be other things like Cameras
and Lights. Each GLTF Node has a transform for positioning it in the scene.
GLTF Nodes do not have a core Bevy equivalent; Bevy just uses this data to
create the ECS Entities inside of a Scene. Bevy has a special <code>GltfNode</code>
asset type, if you need access to this data.</p>
<p>GLTF <strong>Meshes</strong> represent one conceptual &quot;3D object&quot;. These correspond to
the &quot;objects&quot; in your 3D modeling software. GLTF Meshes may be complex and
composed of multiple smaller pieces, called GLTF Primitives, each of which
may use a different Material. GLTF Meshes do not have a core Bevy equivalent,
but there is a special <code>GltfMesh</code> asset type, which describes the primitives.</p>
<p>GLTF <strong>Primitives</strong> are individual &quot;units of 3D geometry&quot;, for the purposes of
rendering. They contain the actual geometry / vertex data, and reference the
Material to be used when drawing. In Bevy, each GLTF Primitive is represented
as a Bevy <a href="./meshes.html">Mesh</a> asset, and must be spawned as a separate
<a href="./pbr.html">PBR</a> ECS Entity to be rendered.</p>
<p>GLTF <strong>Materials</strong> describe the shading parameters for the surfaces of
your 3D models. They have full support for <a href="./pbr.html">Physically-Based Rendering
(PBR)</a>. They also reference the textures to use. In Bevy, they are
represented as <code>StandardMaterial</code> assets, as used by the Bevy PBR 3D renderer.</p>
<p>GLTF <strong>Textures</strong> (images) can be embedded inside the GLTF file, or stored
externally in separate image files alongside it. For example, you can have
your textures as separate PNG or JPEG files for ease of development, or
package them all inside the GLTF file for ease of distribution. In Bevy,
GLTF textures are loaded as Bevy <code>Texture</code> assets.</p>
<p>GLTF <strong>Samplers</strong> describe the settings for how the GPU should use a
given Texture. Bevy does not keep these separate; this data is stored inside
the Bevy <code>Texture</code> asset (the <code>sampler</code> field of type <code>SamplerDescriptor</code>).</p>
<h2 id="gltf-usage-patterns"><a class="header" href="#gltf-usage-patterns">GLTF Usage Patterns</a></h2>
<p>Because GLTF is so flexible, it is up to you how to structure your assets.</p>
<p>A single GLTF file might be used:</p>
<ul>
<li>To represent a single &quot;3D model&quot;, containing a single
GLTF Scene with the model, so you can spawn it into your game.</li>
<li>To represent a whole level, as a GLTF Scene, possibly also including
the camera. This lets you load and spawn a whole level/map at once.</li>
<li>To represent a piece of a level/map, such as a room.</li>
<li>To contain a set of many different &quot;3D models&quot;, each as a separate GLTF Scene.
This lets you load and manage the whole collection at once and spawn them individually as needed.</li>
<li>... others?</li>
</ul>
<h2 id="tools-for-creating-gltf-assets"><a class="header" href="#tools-for-creating-gltf-assets">Tools for Creating GLTF Assets</a></h2>
<p>If you are using a recent version of Blender (2.8+) for 3D modeling, GLTF
is supported out of the box. Just export and choose GLTF as the format.</p>
<p>For other tools, you can try these exporter plugins:</p>
<ul>
<li><a href="https://doc.babylonjs.com/extensions/Exporters/Blender_to_glTF">Old Blender (2.79)</a></li>
<li><a href="https://doc.babylonjs.com/extensions/Exporters/3DSMax_to_glTF">3DSMax</a></li>
<li><a href="https://doc.babylonjs.com/extensions/Exporters/Maya_to_glTF">Autodesk Maya</a>
<ul>
<li>(or this <a href="https://kashika.co.jp/product/gltfexporter/">alternative</a>)</li>
</ul>
</li>
</ul>
<h2 id="using-gltf-sub-assets-in-bevy"><a class="header" href="#using-gltf-sub-assets-in-bevy">Using GLTF Sub-Assets in Bevy</a></h2>
<p>The various sub-assets contained in a GLTF file can be addressed in two ways:</p>
<ul>
<li>by index (integer id, in the order they appear in the file)</li>
<li>by name (text string, the names you set in your 3D modeling software
when creating the asset, which can be exported into the GLTF)</li>
</ul>
<p>To get handles to the respective assets in Bevy, you can use the <code>Gltf</code> &quot;master
asset&quot;, or alternatively, <a href="./assets.html#assetpath-and-labels">AssetPath with Labels</a>.</p>
<h3 id="gltf-master-asset"><a class="header" href="#gltf-master-asset"><code>Gltf</code> master asset</a></h3>
<p>If you have a complex GLTF file, this is likely the most flexible and useful
way of navigating its contents and using the different things inside.</p>
<p>You have to wait for the GLTF file to load, and then use the <code>Gltf</code> asset.</p>
<pre><code class="language-rust no_run noplayground">use bevy::gltf::Gltf;

/// Helper resource for tracking our asset
struct MyAssetPack(Handle&lt;Gltf&gt;);

fn load_gltf(
    mut commands: Commands,
    ass: Res&lt;AssetServer&gt;,
) {
    let gltf = ass.load(&quot;my_asset_pack.glb&quot;);
    commands.insert_resource(MyAssetPack(gltf));
}

fn spawn_gltf_objects(
    mut commands: Commands,
    my: Res&lt;MyAssetPack&gt;,
    assets_gltf: Res&lt;Assets&lt;Gltf&gt;&gt;,
) {
    // if the GLTF has loaded, we can navigate its contents
    if let Some(gltf) = assets_gltf.get(&amp;my.0) {
        // spawn the first scene in the file
        commands.spawn_scene(gltf.scenes[0].clone());

        // spawn the scene named &quot;YellowCar&quot;
        // do it under a parent entity, to position it in the world
        commands.spawn_bundle((
            Transform::from_xyz(1.0, 2.0, 3.0),
            GlobalTransform::identity(),
        )).with_children(|parent| {
            parent.spawn_scene(gltf.named_scenes[&quot;YellowCar&quot;].clone());
        });

        // PERF: the `.clone()`s are just for asset handles, don't worry :)
    }
}
</code></pre>
<p>For a more convoluted example, say we want to directly create a 3D PBR
entity, for whatever reason. (This is not recommended; you should probably
just use scenes)</p>
<pre><code class="language-rust no_run noplayground">use bevy::gltf::GltfMesh;

fn gltf_manual_entity(
    mut commands: Commands,
    my: Res&lt;MyAssetPack&gt;,
    assets_gltf: Res&lt;Assets&lt;Gltf&gt;&gt;,
    assets_gltfmesh: Res&lt;Assets&lt;GltfMesh&gt;&gt;,
) {
    if let Some(gltf) = assets_gltf.get(&amp;my.0) {
        // Get the GLTF Mesh named &quot;CarWheel&quot;
        // (unwrap safety: we know the GLTF has loaded already)
        let carwheel = assets_gltfmesh.get(&amp;gltf.named_meshes[&quot;CarWheel&quot;]).unwrap();

        // Spawn a PBR entity with the mesh and material of the first GLTF Primitive
        commands.spawn_bundle(PbrBundle {
            mesh: carwheel.primitives[0].mesh.clone(),
            // (unwrap: material is optional, we assume this primitive has one)
            material: carwheel.primitives[0].material.clone().unwrap(),
            ..Default::default()
        });
    }
}
</code></pre>
<h3 id="assetpath-with-labels"><a class="header" href="#assetpath-with-labels">AssetPath with Labels</a></h3>
<p>This is another way to access specific sub-assets. It is less reliable,
but may be easier to use in some cases.</p>
<p>Use the <code>AssetServer</code> to convert a path string into a <code>Handle</code>.</p>
<p>The advantage is that you can get handles to your sub-assets immediately,
even if your GLTF file hasn't loaded yet.</p>
<p>The disadvantage is that it is more error-prone. If you specify a sub-asset
that doesn't actually exist in the file, or mis-type the label, or use the
wrong label, it will just silently not work. Also, currently only using a
numerial index is supported. You cannot address sub-assets by name.</p>
<pre><code class="language-rust no_run noplayground">fn use_gltf_things(
    mut commands: Commands,
    ass: Res&lt;AssetServer&gt;,
) {
    // spawn the first scene in the file
    let scene0 = ass.load(&quot;my_asset_pack.glb#Scene0&quot;);
    commands.spawn_scene(scene0);

    // spawn the second scene under a parent entity
    // (to move it)
    let scene1 = ass.load(&quot;my_asset_pack.glb#Scene1&quot;);
    commands.spawn_bundle((
        Transform::from_xyz(1.0, 2.0, 3.0),
        GlobalTransform::identity(),
    )).with_children(|parent| {
        parent.spawn_scene(scene1);
    });
}
</code></pre>
<p>The following asset labels are supported (<code>{}</code> is the numerical index):</p>
<ul>
<li><code>Scene{}</code>: GLTF Scene as Bevy <code>Scene</code></li>
<li><code>Node{}</code>: GLTF Node as <code>GltfNode</code></li>
<li><code>Mesh{}</code>: GLTF Mesh as <code>GltfMesh</code></li>
<li><code>Mesh{}/Primitive{}</code>: GLTF Primitive as Bevy <code>Mesh</code></li>
<li><code>Material{}</code>: GLTF Material as Bevy <code>StandardMaterial</code></li>
<li><code>DefaultMaterial</code>: as above, if the GLTF file contains a default material with no index</li>
<li><code>Texture{}</code>: GLTF Texture as Bevy <code>Texture</code></li>
</ul>
<p>The <code>GltfNode</code> and <code>GltfMesh</code> asset types are only useful to help you navigate
the contents of your GLTF file. They are not core Bevy renderer types, and
not used by Bevy in any other way. The Bevy renderer expects Entities with
<code>PbrBundle</code>; for that you need the <code>Mesh</code> and <code>StandardMaterial</code>.</p>
<h2 id="bevy-limitations"><a class="header" href="#bevy-limitations">Bevy Limitations</a></h2>
<p>Bevy does not fully support all features of the GLTF format and has some
specific requirements about the data. Not all GLTF files can be loaded and
rendered in Bevy. Unfortunately, in many of these cases, you will not get
any error or diagnostic message.</p>
<p>Commonly-encountered limitations:</p>
<ul>
<li>Textures embedded in ascii (<code>*.gltf</code>) files (base64 encoding) cannot be loaded.
Put your textures in external files, or use the binary (<code>*.glb</code>) format.</li>
<li>Mipmaps are not supported. Your asset should still load/render,
but without mipmapping.</li>
<li>Bevy's renderer requires all meshes/primitives to have per-vertex positions,
UVs, and normals. Make sure all of this data is included.</li>
<li>Meshes/primitives without textures (if the material is just a solid color)
must still include UVs regardless. Bevy will not render meshes without UVs.</li>
<li>When using normal maps in your material, tangents must also be included in the mesh.
Meshes with normal maps but without tangents are valid; other software would
typically autogenerate the tangents if they are missing, but Bevy does not support
this yet. Be sure to tick the checkbox for including tangents when exporting.</li>
<li>Bevy does not have built-in skeletal animation support yet. Animations are
completely ignored.</li>
<li>Bevy does not support loading GLTF Lights. GLTF Scenes containing Light Nodes
will be spawned without the lights.</li>
</ul>
<p>This list is not exhaustive. There may be other unsupported scenarios that I
did not know of or forgot to include here. :)</p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../features/input-handling.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>
                            <a rel="next" href="../features/fixed-timestep.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>
                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../features/input-handling.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>
                    <a rel="next" href="../features/fixed-timestep.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>

        <script type="text/javascript">
            window.playground_copyable = true;
        </script>
        <script src="../elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../searcher.js" type="text/javascript" charset="utf-8"></script>
        <script src="../clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="../book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->
    </body>
</html>
