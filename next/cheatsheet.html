<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Bevy Cheatsheet - Unofficial Bevy Cheat Book</title>
        
        


        <!-- Custom HTML head -->
        


        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        
        <link rel="icon" href="favicon.svg">
        
        
        <link rel="shortcut icon" href="favicon.png">
        
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        
        <link rel="stylesheet" href="css/print.css" media="print">
        

        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        
        <link rel="stylesheet" href="fonts/fonts.css">
        

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">
        <link rel="stylesheet" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        

        
    </head>
    <body>
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded affix "><a href="introduction.html">Introduction</a></li><li class="chapter-item expanded "><a href="cheatsheet.html" class="active"><strong aria-hidden="true">1.</strong> Bevy Cheatsheet</a></li><li class="chapter-item expanded "><a href="programming/_index.html"><strong aria-hidden="true">2.</strong> Bevy Programming</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="programming/_basics.html"><strong aria-hidden="true">2.1.</strong> Basics</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="programming/ec.html"><strong aria-hidden="true">2.1.1.</strong> Entities and Components</a></li><li class="chapter-item expanded "><a href="programming/res.html"><strong aria-hidden="true">2.1.2.</strong> Resources</a></li><li class="chapter-item expanded "><a href="programming/systems.html"><strong aria-hidden="true">2.1.3.</strong> Systems</a></li><li class="chapter-item expanded "><a href="programming/queries.html"><strong aria-hidden="true">2.1.4.</strong> Queries</a></li><li class="chapter-item expanded "><a href="programming/commands.html"><strong aria-hidden="true">2.1.5.</strong> Commands</a></li><li class="chapter-item expanded "><a href="programming/events.html"><strong aria-hidden="true">2.1.6.</strong> Events</a></li><li class="chapter-item expanded "><a href="programming/app-builder.html"><strong aria-hidden="true">2.1.7.</strong> App Builder (main function)</a></li></ol></li><li class="chapter-item expanded "><a href="programming/_advanced.html"><strong aria-hidden="true">2.2.</strong> Advanced</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="programming/local.html"><strong aria-hidden="true">2.2.1.</strong> Local Resources</a></li><li class="chapter-item expanded "><a href="programming/parent-child.html"><strong aria-hidden="true">2.2.2.</strong> Hierarchical Entities</a></li><li class="chapter-item expanded "><a href="programming/change-detection.html"><strong aria-hidden="true">2.2.3.</strong> Change Detection</a></li><li class="chapter-item expanded "><a href="programming/system-chaining.html"><strong aria-hidden="true">2.2.4.</strong> System Chaining</a></li><li class="chapter-item expanded "><a href="programming/states.html"><strong aria-hidden="true">2.2.5.</strong> States</a></li><li class="chapter-item expanded "><a href="programming/plugins.html"><strong aria-hidden="true">2.2.6.</strong> Plugins</a></li><li class="chapter-item expanded "><a href="programming/stages.html"><strong aria-hidden="true">2.2.7.</strong> Stages</a></li><li class="chapter-item expanded "><a href="programming/labels.html"><strong aria-hidden="true">2.2.8.</strong> Labels</a></li></ol></li></ol></li><li class="chapter-item expanded "><a href="features/_index.html"><strong aria-hidden="true">3.</strong> Bevy Features</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="features/assets.html"><strong aria-hidden="true">3.1.</strong> Assets</a></li></ol></li><li class="chapter-item expanded "><a href="pitfalls/_index.html"><strong aria-hidden="true">4.</strong> Common Pitfalls</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="pitfalls/into-system.html"><strong aria-hidden="true">4.1.</strong> Error adding function as system</a></li><li class="chapter-item expanded "><a href="pitfalls/performance.html"><strong aria-hidden="true">4.2.</strong> Slow Performance</a></li><li class="chapter-item expanded "><a href="pitfalls/file-formats.html"><strong aria-hidden="true">4.3.</strong> File Format Support</a></li><li class="chapter-item expanded "><a href="pitfalls/time.html"><strong aria-hidden="true">4.4.</strong> Bevy Time vs. Rust/OS time</a></li><li class="chapter-item expanded "><a href="pitfalls/ui-y-up.html"><strong aria-hidden="true">4.5.</strong> UI layout is inverted</a></li></ol></li><li class="chapter-item expanded "><a href="patterns/_index.html"><strong aria-hidden="true">5.</strong> Advanced Patterns</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="patterns/generic-systems.html"><strong aria-hidden="true">5.1.</strong> Generic Systems</a></li></ol></li><li class="chapter-item expanded "><a href="cookbook/_index.html"><strong aria-hidden="true">6.</strong> Bevy Cookbook</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="cookbook/input-handling.html"><strong aria-hidden="true">6.1.</strong> Input Handling</a></li><li class="chapter-item expanded "><a href="cookbook/quit.html"><strong aria-hidden="true">6.2.</strong> Quitting the App</a></li><li class="chapter-item expanded "><a href="cookbook/clear-color.html"><strong aria-hidden="true">6.3.</strong> Changing the Background Color</a></li><li class="chapter-item expanded "><a href="cookbook/print-framerate.html"><strong aria-hidden="true">6.4.</strong> Show Framerate in Console</a></li><li class="chapter-item expanded "><a href="cookbook/assets-ready.html"><strong aria-hidden="true">6.5.</strong> Track Assets Loading</a></li><li class="chapter-item expanded "><a href="cookbook/mouse-grab.html"><strong aria-hidden="true">6.6.</strong> Grabbing the Mouse</a></li><li class="chapter-item expanded "><a href="cookbook/cursor2world.html"><strong aria-hidden="true">6.7.</strong> Convert cursor to world coordinates</a></li><li class="chapter-item expanded "><a href="cookbook/custom-projection.html"><strong aria-hidden="true">6.8.</strong> Custom Camera Projection</a></li><li class="chapter-item expanded "><a href="cookbook/pan-orbit-camera.html"><strong aria-hidden="true">6.9.</strong> Pan+Orbit Camera</a></li></ol></li><li class="chapter-item expanded "><a href="contributing.html">Contributing</a></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light (default)</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                        
                    </div>

                    <h1 class="menu-title">Unofficial Bevy Cheat Book</h1>

                    <div class="right-buttons">
                        
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                        
                        
                    </div>
                </div>

                
                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" name="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>
                

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="bevy-cheatsheet"><a class="header" href="#bevy-cheatsheet">Bevy Cheatsheet</a></h1>
<p>One-page overview of common bevy syntax and features.</p>
<p>Concise listing of the syntax + important usage notes, no explanations.</p>
<p>Intended for people who are familiar with the core concepts.</p>
<p>If you are new to bevy or need a refresher, see
<a href="./programming/_index.html">Bevy Programming</a>
for brief explanations of each feature.</p>
<hr />
<p>Click on &quot;[explain]&quot; links to go to the relevant <a href="./programming/_index.html">Bevy Programming</a> page!</p>
<hr />
<h2 id="systems"><a class="header" href="#systems">Systems</a></h2>
<p>[<a href="./programming/systems.html">explain</a>]</p>
<p>Regular Rust functions, but can only take special parameter types supported by Bevy:</p>
<ul>
<li><code>Commands</code></li>
<li><code>Res&lt;T&gt;</code> / <code>ResMut&lt;T&gt;</code></li>
<li><code>Option&lt;Res&lt;T&gt;&gt;</code> / <code>Option&lt;ResMut&lt;T&gt;&gt;</code></li>
<li><code>Local&lt;T&gt;</code></li>
<li><code>EventReader&lt;T&gt;</code></li>
<li><code>EventWriter&lt;T&gt;</code></li>
<li><code>Query&lt;T, F = ()&gt;</code>; can contain tuples of up to 14 types</li>
<li><code>QuerySet</code> with up to 4 queries</li>
<li><code>NonSend&lt;T&gt;</code> / <code>NonSendMut&lt;T&gt;</code></li>
<li><code>Entities</code></li>
<li><code>Components</code></li>
<li><code>Bundles</code></li>
<li><code>Archetypes</code></li>
<li><code>RemovedComponents&lt;T&gt;</code></li>
<li><code>Arc&lt;parking_lot::Mutex&lt;Commands&gt;&gt;</code></li>
<li><code>DrawContext</code></li>
<li>tuples containing any of these types, with up to 11 members</li>
</ul>
<p>Your function can have a maximum of 11 total parameters. If you need more, group
them into tuples to work around the limit.</p>
<h2 id="entities-and-components"><a class="header" href="#entities-and-components">Entities and Components</a></h2>
<p>[<a href="./programming/ec.html">explain</a>]</p>
<p>Any Rust type (<code>struct</code> or <code>enum</code>) can be used as a component.</p>
<p>Type must be unique; only one instance per type per entity can exist. Use newtypes.</p>
<p>See <a href="#commands"><code>Commands</code></a> for how to add components to entities and spawn entities.</p>
<p>Component bundles:</p>
<pre><code class="language-rust no_run noplayground">#[derive(Bundle)]
struct AbBundle {
    a: ComponentA,
    b: ComponentB,
}
</code></pre>
<h2 id="resources"><a class="header" href="#resources">Resources</a></h2>
<p>[<a href="./programming/res.html">explain</a>]</p>
<p>Any Rust type (<code>struct</code> or <code>enum</code>) can be used as a resource.</p>
<p>Type must be unique; only one instance per type can exist. Use newtypes.</p>
<p>Access from system:</p>
<pre><code class="language-rust no_run noplayground">fn my_system(a: Res&lt;MyResourceA&gt;, mut b: ResMut&lt;MyResourceB&gt;) {
    // do something with `a` and `b`
}
</code></pre>
<p>Add when <a href="#app-builder-main-function">building the app</a>:</p>
<pre><code class="language-rust no_run noplayground">    fn main() {
        App::build()
            // specific resource value
            .insert_resource(MyResource::new())
            // auto-init using `Default` or `FromWorld`
            .init_resource::&lt;MyAutoResource&gt;()
            .run();
    }
</code></pre>
<p>Manage using <a href="#commands"><code>Commands</code></a>:</p>
<pre><code class="language-rust no_run noplayground">    commands.insert_resource(MyData::default());
</code></pre>
<p>For complex resource initialization, implement <code>FromWorld</code>:</p>
<pre><code class="language-rust no_run noplayground">impl FromWorld for MyFancyResource {
    fn from_world(world: &amp;mut World) -&gt; Self {
        // You have full access to anything in the ECS from here.

        // For instance, you can mutate other resources:
        let mut x = world.get_resource_mut::&lt;MyOtherResource&gt;().unwrap();
        x.do_mut_stuff();

        MyFancyResource { /* stuff */ }
    }
}
</code></pre>
<h2 id="queries"><a class="header" href="#queries">Queries</a></h2>
<p>[<a href="./programming/queries.html">explain</a>]</p>
<pre><code class="language-rust no_run noplayground">fn my_system(
    mut query: Query&lt;(Entity, &amp;ComponentA, &amp;mut ComponentB, Option&lt;&amp;mut ComponentC&gt;)&gt;
) {
    // operate on all matching entities
    for (entity, a, mut b, c) in query.iter_mut() {
        // do something with `a` and `b`; `entity` is the Entity id
        if let Some(mut c) = c {
            // do something with `c` if it exists
        }
    }
}
</code></pre>
<p>To operate on a specific entity:</p>
<pre><code class="language-rust no_run noplayground">    if let Ok((a, mut b)) = query.get_mut(entity) {
        // do something with `a` and `b`
    } else {
        // entity does not match the query
    }
</code></pre>
<p>Add query filters:</p>
<pre><code class="language-rust no_run noplayground">fn with_filter(query: Query&lt;&amp;MyData, (Without&lt;ComponentA&gt;, Or&lt;(With&lt;Foo&gt;, With&lt;Bar&gt;)&gt;)&gt;) {
    // only get `data` for entities that match the filter criteria
    for data in query.iter() {
        // use data
    }
}
</code></pre>
<p>Query sets (to resolve component access conflicts):</p>
<pre><code class="language-rust no_run noplayground">fn conflicting_queries(
    mut set: QuerySet&lt;(
        // these queries cannot be used at the same time, due to mutability conflict
        Query&lt;&amp;mut MyData, With&lt;ComponentA&gt;&gt;,
        Query&lt;&amp;mut MyData, With&lt;ComponentB&gt;&gt;,
    )&gt;,
) {
    for data in set.q0_mut().iter_mut() {
        // access `data` of entities that match the first query
    }
    for data in set.q1_mut().iter_mut() {
        // access `data` of entities that match the second query
    }
}
</code></pre>
<h2 id="change-detection"><a class="header" href="#change-detection">Change Detection</a></h2>
<p>[<a href="./programming/change-detection.html">explain</a>]</p>
<p>Query filters:</p>
<ul>
<li><code>Added&lt;T&gt;</code>: detect adding new components to existing entities</li>
<li><code>Changed&lt;T&gt;</code>: detect when a component is modified</li>
</ul>
<pre><code class="language-rust no_run noplayground">fn with_change_detection(query: Query&lt;&amp;MyData, Changed&lt;MyData&gt;&gt;) {
    // only get `data` if it changed
    for data in query.iter() {
        // use data
    }
}
</code></pre>
<p>Change detection is triggered by <code>DerefMut</code>. Accessing components via a mutable
query without it actually being a <code>&amp;mut</code> access, will <em>not</em> trigger it.</p>
<p>Beware of <a href="./pitfalls/frame-delay.html">frame delay / 1-frame-lag</a>. You may want
to use <a href="#system-order-of-execution">explicit system ordering</a>.</p>
<h2 id="commands"><a class="header" href="#commands">Commands</a></h2>
<p>[<a href="./programming/commands.html">explain</a>]</p>
<pre><code class="language-rust no_run noplayground">fn manage_entities_components_resources(mut commands: Commands) {
    // replaces any existing resource of this type
    commands.insert_resource(MyData::default());

    // create/spawn a new entity
    let id = commands.spawn()
        // add a bundle
        .insert_bundle(MyBundle::default())
        // add a single component
        .insert(MyComponent::default())
        // get the entity id
        .id();

    // shorthand syntax for using a bundle
    commands.spawn_bundle(MyBundle::default())
        .insert(ExtraComponent);

    // add components to existing entity
    commands.entity(id)
        .insert_bundle(MyBundle::default())
        .insert(MyComponent::default());

    // remove components from entity
    commands.entity(id)
        .remove::&lt;MyComponent&gt;()
        .remove_bundle::&lt;MyBundle&gt;();

    // despawn an entity
    commands.entity(id).despawn();
}
</code></pre>
<p>These actions are applied at the end of the stage.</p>
<h2 id="local-per-system-resources"><a class="header" href="#local-per-system-resources">Local (per-system) Resources</a></h2>
<p>[<a href="./programming/local.html">explain</a>]</p>
<pre><code class="language-rust no_run noplayground">fn with_local(local: Local&lt;MyData&gt;) {
    // `local` is an instance of `MyData` uniquely for this system
}
</code></pre>
<p>The type must implement <code>Default</code> or <code>FromWorld</code>. It is automatically initialized.</p>
<h2 id="events"><a class="header" href="#events">Events</a></h2>
<p>[<a href="./programming/events.html">explain</a>]</p>
<pre><code class="language-rust no_run noplayground">struct MyEvent;

fn sender(mut writer: EventWriter&lt;MyEvent&gt;) {
    writer.send(MyEvent);
}

fn receiver(mut reader: EventReader&lt;MyEvent&gt;) {
    for event in reader.iter() {
        // handle event
    }
}

fn main() {
    App::build()
        .add_event::&lt;MyEvent&gt;()
        // ...
        .run();
}
</code></pre>
<p>Events don't persist. They are stored until the end of the next frame, after
which they are lost. If your systems do not handle events every frame, you could
miss some.</p>
<p>Beware of <a href="./pitfalls/frame-delay.html">frame delay / 1-frame-lag</a>. You may want
to use <a href="#system-order-of-execution">explicit system ordering</a>.</p>
<h2 id="entity-hierarchies-parentchild"><a class="header" href="#entity-hierarchies-parentchild">Entity Hierarchies (Parent/Child)</a></h2>
<p>[<a href="./programming/parent-child.html">explain</a>]</p>
<pre><code class="language-rust no_run noplayground">fn spawn_nested(mut commands: Commands) {
    let parent = commands.spawn_bundle(MyParentBundle::default())
        .with_children(|parent| {
            parent.spawn_bundle(MyChildBundle::default());
        }).id();

    // despawn a parent and all its children
    commands.entity(parent).despawn_recursive();
}
</code></pre>
<p>Reparent an existing entity:</p>
<pre><code class="language-rust no_run noplayground">    commands.entity(parent).push_children(&amp;[child]);
</code></pre>
<p>If you are using <code>Transform</code>s, ensure both the parent and the child also have a <code>GlobalTransform</code>.</p>
<p>Child <code>Transform</code> is relative to the parent. <code>GlobalTransform</code> is internally managed by bevy.</p>
<h2 id="system-chaining"><a class="header" href="#system-chaining">System Chaining</a></h2>
<p>[<a href="./programming/system-chaining.html">explain</a>]</p>
<pre><code class="language-rust no_run noplayground">fn output_system(/* system params */) -&gt; MyData {
    MyData
}

fn input_system(In(data): In&lt;MyData&gt;) {
    // use `data`
}

fn main() {
    App::build()
        .add_system(output_system.system().chain(input_system.system()))
        .run();
}
</code></pre>
<h2 id="app-builder-main-function"><a class="header" href="#app-builder-main-function">App Builder (main function)</a></h2>
<p>[<a href="./programming/app-builder.html">explain</a>, <a href="./programming/stages.html">stages</a>, <a href="./programming/plugins.html">plugins</a>]</p>
<p>App builder:</p>
<pre><code class="language-rust no_run noplayground">fn main() {
    // labels for custom stages:
    static DEBUG: &amp;str = &quot;debug&quot;;
    static MY_START: &amp;str = &quot;my_start&quot;;

    App::build()
        // bevy
        .add_plugins(DefaultPlugins)
        // custom plugin
        .add_plugin(MyPlugin::default())
        // specific resource value
        .insert_resource(MyResource::new())
        // auto-init using `Default` or `FromWorld`
        .init_resource::&lt;MyAutoResource&gt;()
        // add a custom event type:
        .add_event::&lt;MyEvent&gt;()
        // run once at startup:
        .add_startup_system(setup.system())
        // run each frame (in `UPDATE` stage):
        .add_system(game_update.system())
        // add custom stage:
        .add_stage_before(CoreStage::Update, MY_START, SystemStage::parallel())
        // serial stage (parallel system execution disabled)
        .add_stage_after(CoreStage::Update, DEBUG, SystemStage::single_threaded())
        // run system in specific stage:
        .add_system_to_stage(DEBUG, debug_system.system())
        // enter the bevy runtime
        .run();

}
</code></pre>
<p>Custom plugin:</p>
<pre><code class="language-rust no_run noplayground">struct MyPlugin;

impl Plugin for MyPlugin {
    fn build(&amp;self, app: &amp;mut AppBuilder) {
        // use `app` builder
    }
}
</code></pre>
<h2 id="system-order-of-execution"><a class="header" href="#system-order-of-execution">System Order of Execution</a></h2>
<p>[<a href="./programming/system-order.html">explain</a>]</p>
<h2 id="states"><a class="header" href="#states">States</a></h2>
<p>[<a href="./programming/states.html">explain</a>]</p>
<p>App builder with States:</p>
<pre><code class="language-rust no_run noplayground">#[derive(Debug, Clone, PartialEq, Eq, Hash)]
enum MyState {
    MainMenu,
    InGame,
}

fn main() {
    App::build()
        // add the app state type
        .add_state(MyState::MainMenu)
        // this one will run regardless of state
        .add_system(state_independent.system())
        // add systems to states
        .add_system_set(
            SystemSet::on_enter(MyState::MainMenu)
                .with_system(setup_menu.system())
        )
        .add_system_set(
            SystemSet::on_exit(MyState::MainMenu)
                .with_system(close_menu.system())
        )
        .add_system_set(
            SystemSet::on_update(MyState::InGame)
                .with_system(update_player.system())
        )
        .run();
}
</code></pre>
<p>Change or check States:</p>
<pre><code class="language-rust no_run noplayground">fn manage_state(mut state: ResMut&lt;State&lt;MyState&gt;&gt;) {
    if *state.current() == MyState::MainMenu {
        // FIXME new states
        state.set(MyState::InGame).unwrap();
        // ^ error if another state change is pending
        // or if already in the target state
    }
}
</code></pre>
<h2 id="assets"><a class="header" href="#assets">Assets</a></h2>
<p>[<a href="./features/assets.html">explain</a>]</p>
<p>Load asset:</p>
<pre><code class="language-rust no_run noplayground">fn asset_setup(server: Res&lt;AssetServer&gt;) {
    // load path as an asset of specified type
    let handle: Handle&lt;MyAssetType&gt; = server.load(&quot;path/to/asset.file&quot;);
    // autodetect type based on file extension
    let untyped = server.load_untyped(&quot;path/to/file.png&quot;);
    // load a whole folder
    let handles = server.load_folder(&quot;path/to/folder&quot;);
}
</code></pre>
<p>Access assets from systems:</p>
<pre><code class="language-rust no_run noplayground">// store the handle somewhere (in a component or resource)
struct MyAsset(Handle&lt;MyAssetType&gt;);

fn asset_use(assets: Res&lt;Assets&lt;MyAssetType&gt;&gt;, my: Res&lt;MyAsset&gt;) {
    // the asset might not have finished loading yet
    if let Some(data) = assets.get(&amp;my.0) {
        // it's ready
    } else {
        // it's not ready
    }
}
</code></pre>
<p>Create assets from code:</p>
<pre><code class="language-rust no_run noplayground">fn generate_asset(mut assets: ResMut&lt;Assets&lt;MyAssetType&gt;&gt;) {
    assets.add(MyAssetType::new());
}
</code></pre>
<p>Asset events:</p>
<pre><code class="language-rust no_run noplayground">fn asset_events(mut reader: EventReader&lt;AssetEvent&lt;MyAssetType&gt;&gt;) {
    for event in reader.iter() {
        match event {
            AssetEvent::Created { handle } =&gt; {
                // asset just finished loading
            }
            AssetEvent::Modified { handle } =&gt; {
                // asset was changed
            }
            AssetEvent::Removed { handle } =&gt; {
                // asset was unloaded
            }
        }
    }
}
</code></pre>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                        
                            <a rel="prev" href="introduction.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>
                        

                        
                            <a rel="next" href="programming/_index.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>
                        

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                
                    <a rel="prev" href="introduction.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>
                

                
                    <a rel="next" href="programming/_index.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
                
            </nav>

        </div>

        

        

        

        
        <script type="text/javascript">
            window.playground_copyable = true;
        </script>
        

        

        
        <script src="elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="searcher.js" type="text/javascript" charset="utf-8"></script>
        

        <script src="clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->
        

        

    </body>
</html>
